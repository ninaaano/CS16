# CS04

## ğŸ“ í•™ìŠµ í‚¤ì›Œë“œ

- íŒ¨ë”©

ì ì€ ìˆ˜ì˜ ì»´íŒŒì¼ëŸ¬ëŠ” êµ¬ì¡°ì²´ì˜ í•„ë“œë¥¼ ë©”ëª¨ë¦¬ì— ìœ„ì¹˜ì‹œí‚¬ ë•Œ, ì¤‘ê°„ ë¹ˆ ê³µê°„ ì—†ì´ ì­‰ ì´ì–´ì„œ í• ë‹¹í•œë‹¤.  
í•˜ì§€ë§Œ ëŒ€ë¶€ë¶„ì˜ ì»´íŒŒì¼ëŸ¬ëŠ” ì„±ëŠ¥ í–¥ìƒì„ ìœ„í•´ CPUê°€ ì ‘ê·¼í•˜ê¸° ì‰¬ìš´ ìœ„ì¹˜ì— í•„ë“œë¥¼ ë°°ì¹˜í•˜ëŠ”ë° ì´ë¥¼ **êµ¬ì¡°ì²´ íŒ¨ë”©**ì´ë¼ê³  í•œë‹¤. ê·¸ë¦¬ê³  ì¤‘ê°„ ë¹ˆ ê³µê°„ì— ë“¤ì–´ê°„ ê²ƒì„ **íŒ¨ë”© ë¹„íŠ¸**ë¼ê³  í•œë‹¤.
ì°¸ê³ ë¡œ os 32bit í™˜ê²½ì—ì„œëŠ” 4byte packing ë°©ì‹ì´ ë¹ ë¥´ê³ , os 64bit í™˜ê²½ì—ì„œëŠ” 8byte packing ë°©ì‹ì´ ë¹ ë¥´ë‹¤ê³  í•œë‹¤.  
ì£¼ë¡œ ë„¤í¬ì›Œí¬ë¥¼ í†µí•œ êµ¬ì¡°ì²´ ì „ì†¡ ì‹œ êµ¬ì¡°ì²´ íŒ¨ë”©ì´ ì¤‘ìš”í•˜ë‹¤ê³  í•œë‹¤. (êµ¬ì¡°ì²´ë¥¼ ê·¸ëŒ€ë¡œ ì§ë ¬í™” í•œ ì±„ ì „ì†¡í•  ë•Œ)  
ì„œë¡œ ë‹¤ë¥¸ ì»´í“¨í„° ì‹œìŠ¤í…œì—ì„œ ë©”ëª¨ë¦¬ë¥¼ ì½ëŠ” ë°©ì‹ì´ ë‹¤ë¥´ê¸° ë•Œë¬¸ì—, packingì‹œ ì²´ì›Œì§„ íŒ¨ë”© ë¹„íŠ¸ë•Œë¬¸ì— ê° ì»´í“¨í„°ì—ì„œ êµ¬ì¡°ì²´ë¥¼ ë‹¤ë¥´ê²Œ ì½ì„ ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤.


- í¬ì¸í„°  

í¬ì¸í„°(pointer)ë€ ë©”ëª¨ë¦¬ì˜ ì£¼ì†Œê°’ì„ ì €ì¥í•˜ëŠ” ë³€ìˆ˜ì´ë©°, í¬ì¸í„° ë³€ìˆ˜ë¼ê³ ë„ ë¶€ë¥¸ë‹¤.  

![http://www.tcpschool.com/lectures/img_c_address.png](http://www.tcpschool.com/lectures/img_c_address.png)


- ê°€ë¹„ì§€ ì½œë™ì…˜  

ì¤„ì—¬ì„œ GCë¼ê³  ë¶€ë¥¸ë‹¤.  
ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ì€ ìë°”ì˜ ë©”ëª¨ë¦¬ ê´€ë¦¬ ë°©ë²• ì¤‘ í•˜ë‚˜ë¡œ JVMì˜ Heap ì˜ì—­ì—ì„œ ë™ì ìœ¼ë¡œ í• ë‹¹í–ˆë˜ ë©”ëª¨ë¦¬ ì˜ì—­ ì¤‘ í•„ìš”ì—†ê²Œ ëœ ë©”ëª¨ë¦¬ ì˜ì—­ì„ ì£¼ê¸°ì ìœ¼ë¡œ ì‚­ì œí•˜ëŠ” í”„ë¡œì„¸ìŠ¤ë¥¼ ë§í•œë‹¤.  
Cë‚˜ C++ì—ì„œëŠ” ì´ëŸ¬í•œ ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ì´ ì—†ì–´ì„œ í”„ë¡œê·¸ë˜ë¨¸ê°€ ìˆ˜ë™ìœ¼ë¡œ ë©”ëª¨ë¦¬ í• ë‹¹ê³¼ í•´ì œë¥¼ ì¼ì¼ì´ í•´ì¤˜ì•¼í•˜ì§€ë§Œ JavaëŠ” JVMì— íƒ‘ì¬ë˜ì–´ ìˆëŠ” ê°€ë¹„ì§€ ì»¬ë ‰í„°ê°€ ë©”ëª¨ë¦¬ ê´€ë¦¬ë¥¼ ëŒ€í–‰í•´ì£¼ê¸° ë•Œë¬¸ì—  
ê°œë°œì ì…ì¥ì—ì„œ ë©”ëª¨ë¦¬ ê´€ë¦¬, ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë¬¸ì œì— ëŒ€í•´ ì™„ë²½í•˜ê²Œ ê´€ë¦¬í•˜ì§€ ì•Šì•„ë„ ëœë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤.  
ë‹¨ì ìœ¼ë¡œëŠ” ê°œë°œìê°€ ë©”ëª¨ë¦¬ê°€ ì–¸ì œ í•´ì œë˜ëŠ”ì§€ ì •í™•í•˜ê²Œ ì•Œ ìˆ˜ ì—†ê³ , GCê°€ ë™ì‘í•˜ëŠ” ë™ì•ˆì— ë‹¤ë¥¸ ë™ì‘ì„ ë©ˆì¶”ê¸° ë•Œë¬¸ì— ì˜¤ë²„í—¤ë“œê°€ ë°œìƒí•œë‹¤.

  ![https://blog.kakaocdn.net/dn/bW5c5r/btrvAb4nrdH/lYHuQZya8ECvEndRkQchjk/img.png](https://blog.kakaocdn.net/dn/bW5c5r/btrvAb4nrdH/lYHuQZya8ECvEndRkQchjk/img.png)

ê°ì²´ë“¤ì€ ì‹¤ì§ˆì ìœ¼ë¡œ Heap ì˜ì—­ì— ìƒì„±ë˜ê³  Method Areaì´ë‚˜ Stack Areaë“± Root Areaì—ì„œëŠ” Heap Areaì— ìƒì„±ëœ ê°ì²´ì˜ ì£¼ì†Œë§Œ ì°¸ì¡°í•˜ëŠ” í˜•ì‹ìœ¼ë¡œ êµ¬ì„±ëœë‹¤.  
í•˜ì§€ë§Œ ì´ë ‡ê²Œ ìƒì„±ëœ Heap Areaì˜ ê°ì²´ë“¤ì´ ë©”ì„œë“œê°€ ëë‚˜ëŠ” ë“±ì˜ íŠ¹ì • ì´ë²¤íŠ¸ë“¤ë¡œ ì¸í•˜ì—¬ Heap Area ê°ì²´ì˜ ë©”ëª¨ë¦¬ ì£¼ì†Œë¥¼ ê°€ì§€ê³  ìˆëŠ” ì°¸ì¡° ë³€ìˆ˜ê°€ ì‚­ì œë˜ëŠ” í˜„ìƒì´ ë°œìƒí•˜ë©´ 
ìœ„ì˜ ê·¸ë¦¼ì—ì„œì˜ ë¹¨ê°„ìƒ‰ ê°ì²´ì™€ ê°™ì´ Heapì˜ì—­ì—ì„œ ì–´ë””ì„œë“  ì°¸ì¡°í•˜ê³  ìˆì§€ ì•Šì€ ê°ì²´ë“¤ì´ ë°œìƒí•˜ê²Œ ëœë‹¤. 
ì´ëŸ¬í•œ ê°ì²´ë“¤ì„ Unreachableí•˜ë‹¤ê³  í•˜ë©° ì£¼ê¸°ì ìœ¼ë¡œ ê°€ë¹„ì§€ ì»¬ë ‰í„°ê°€ ì œê±°í•´ì¤€ë‹¤.

  > Reachable : ê°ì²´ê°€ ì°¸ì¡°ë˜ê³  ìˆëŠ” ìƒíƒœ
  
  > Unreachable : ê°ì²´ê°€ ì°¸ì¡°ë˜ê³  ìˆì§€ ì•Šì€ ìƒíƒœ (GCì˜ ëŒ€ìƒì´ ë¨)
  
  [[Java] ìë°” JVM ë‚´ë¶€ êµ¬ì¡°ì™€ ë©”ëª¨ë¦¬ êµ¬ì¡°ì— ëŒ€í•˜ì—¬](https://coding-factory.tistory.com/828)

- í™  
  - ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ëŠ” ê³¼ì •ì´ ë” ë³µì¡í•˜ê¸° ë•Œë¬¸ì— ìŠ¤íƒë³´ë‹¤ ëŠë¦¬ì§€ë§Œ ìŠ¤íƒë³´ë‹¤ ë” ë§ì€ ë°ì´í„°ë¥¼ ì €ì¥í•  ìˆ˜ ìˆë‹¤
    í™ì€ ì‘ìš© í”„ë¡œê·¸ë¨ì˜ ìŠ¤ë ˆë“œê°„ ê³µìœ ëœë‹¤
  - í™ì— ì €ì¥ë˜ëŠ” ë°ì´í„°ëŠ” ì „ì—­ ë³€ìˆ˜, ê°œì²´, ë¬¸ìì—´, ë§µ ë° ê¸°íƒ€ ë³µì¡í•œ ë°ì´í„° êµ¬ì¡°ì™€ ê°™ì€ ì°¸ì¡° ìœ í˜•ì´ë‹¤.
  - í™ì— ì €ì¥í•  ìˆ˜ ìˆëŠ” ê°’ì˜ í¬ê¸°ì—ëŠ” ì œí•œì´ ì—†ë‹¤  
  
ë©”ëª¨ë¦¬ì˜ í™(heap) ì˜ì—­ì€ ì‚¬ìš©ìê°€ ì§ì ‘ ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” 'ê·¸ë¦¬ê³  í•´ì•¼ë§Œ í•˜ëŠ”' ë©”ëª¨ë¦¬ ì˜ì—­ì´ë‹¤.  
í™ ì˜ì—­ì€ ì‚¬ìš©ìì— ì˜í•´ ë©”ëª¨ë¦¬ ê³µê°„ì´ ë™ì ìœ¼ë¡œ í• ë‹¹ë˜ê³  í•´ì œëœë‹¤. í™ ì˜ì—­ì€ ë©”ëª¨ë¦¬ì˜ ë‚®ì€ ì£¼ì†Œì—ì„œ ë†’ì€ ì£¼ì†Œì˜ ë°©í–¥ìœ¼ë¡œ í• ë‹¹ëœë‹¤.
JVMì—ì„œ í™ ë©”ëª¨ë¦¬ëŠ” ìë°” í”„ë¡œê·¸ë¨ì´ ì‹¤í–‰ë˜ë©´ì„œ ë™ì ìœ¼ë¡œ ìƒì„±ëœ ê°ì²´(new ì—°ì‚°ìë¡œ ìƒì„±ëœ ê°ì²´ ë˜ëŠ” ì¸ìŠ¤í„´ìŠ¤)ê°€ ì €ì¥ë˜ëŠ” ê³µê°„ì´ë‹¤.  
ì´ê³³ì— ìƒì„±ëœ ê°ì²´ë“¤ì€ ë‹¤ë¥¸ ê°ì²´ì˜ í•„ë“œ ë˜ëŠ” ìŠ¤íƒì— ì¡´ì¬í•˜ëŠ” ë‹¤ë¥¸ ë©”ì†Œë“œì— ì˜í•´ ì°¸ì¡°ë  ìˆ˜ ìˆë‹¤.  
ì°¸ì¡°ë˜ëŠ” ë³€ìˆ˜ê°€ ì‚¬ë¼ì§„ë‹¤ë©´ ì´ ê°ì²´ëŠ” í•„ìš”ì—†ëŠ” ê²ƒìœ¼ë¡œ ê°„ì£¼í•˜ê³  GCì— ì˜í•´ í• ë‹¹ì´ í•´ì œëœë‹¤.  


- í˜¸ì¶œ ìŠ¤íƒ(call stack)  

call stackì´ë€ ë©”ì„œë“œ ìˆ˜í–‰ì— í•„ìš”í•œ ë©”ëª¨ë¦¬ê°€ ì œê³µë˜ëŠ” ê³µê°„. ìŠ¤íƒ ì˜ì—­ì€ í•¨ìˆ˜ì˜ í˜¸ì¶œê³¼ í•¨ê»˜ í• ë‹¹ë˜ë©°, í•¨ìˆ˜ì˜ í˜¸ì¶œì´ ì™„ë£Œë˜ë©´ ì†Œë©¸í•œë‹¤.  
ìŠ¤íƒ ì˜ì—­ì— ì €ì¥ë˜ëŠ” í•¨ìˆ˜ì˜ í˜¸ì¶œ ì •ë³´ë¥¼ ìŠ¤íƒ í”„ë ˆì„ì´ë¼ê³  í•œë‹¤. í˜„ì¬ ì‹¤í–‰ì¤‘ì¸ ì„œë¸Œ ë£¨í‹´ì˜ ì‹¤í–‰ì´ ëë‚¬ì„ ë•Œ, ì œì–´ë¥¼ ë°˜í™˜í•  ì§€ì ì„ ë³´ê´€í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•œë‹¤.


- ìŠ¤íƒ  
  - ë‹¤ì¤‘ ìŠ¤ë ˆë“œ ì–´í”Œë¦¬ì¼€ì´ì…˜ì€ ìŠ¤ë ˆë“œë‹¹ ìŠ¤íƒì„ ê°€ì§ˆ ìˆ˜ ìˆë‹¤
  - ìŠ¤íƒì— ì €ì¥ë˜ëŠ” ì¼ë°˜ì ì¸ ë°ì´í„°ëŠ” ì§€ì—­ë³€ìˆ˜(ê°’, primitive, primitive constants), í¬ì¸í„°, í•¨ìˆ˜ í”„ë ˆì„ì´ë‹¤.
  - ìŠ¤íƒ í¬ê¸°ê°€ í™ì— ë¹„í•´ ì œí•œë˜ì–´ ìˆì–´ì„œ ìŠ¤íƒì˜¤ë²„í”Œë¡œìš°ê°€ ë°œìƒí•œë‹¤
  - ëŒ€ë¶€ë¶„ì˜ ì–¸ì–´ì—ì„œ ìŠ¤íƒì— ì €ì¥í•  ìˆ˜ ìˆëŠ” ê°’ì˜ í¬ê¸°ëŠ” ì œí•œì ì´ë‹¤  

ë©”ëª¨ë¦¬ì˜ ìŠ¤íƒ ì˜ì—­ì€ í•¨ìˆ˜ì˜ í˜¸ì¶œê³¼ ê´€ê³„ë˜ëŠ” ì§€ì—­ ë³€ìˆ˜ì™€ ë§¤ê°œë³€ìˆ˜ê°€ ì €ì¥ë˜ëŠ” ì˜ì—­ì´ë‹¤.  ìŠ¤íƒ ì˜ì—­ì€ pushë¡œ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê³ , popìœ¼ë¡œ ë°ì´í„°ë¥¼ ì¸ì¶œí•œë‹¤.  
ì´ëŸ¬í•œ ìŠ¤íƒì€ í›„ì…ì„ ì¶œ(LIFO : Last-In First-Out) ë°©ì‹ì— ë”°ë¼ ë™ì‘í•˜ë¯€ë¡œ ê°€ì¥ ëŠ¦ê²Œ ì €ì¥ëœ ë°ì´í„°ê°€ ê°€ì¥ ë¨¼ì € ì¸ì¶œëœë‹¤.  
ìŠ¤íƒ ì˜ì—­ì€ ë©”ëª¨ë¦¬ì˜ ë†’ì€ ì£¼ì†Œì—ì„œ ë‚®ì€ ì£¼ì†Œì˜ ë°©í–¥ìœ¼ë¡œ í• ë‹¹ëœë‹¤  


![https://res.cloudinary.com/practicaldev/image/fetch/s--lInxMFo1--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://i.imgur.com/7KpvEn1.gif](https://res.cloudinary.com/practicaldev/image/fetch/s--lInxMFo1--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://i.imgur.com/7KpvEn1.gif)


- malloc  
Cì–¸ì–´ì—ì„œ ë°°ì—´ì„ ë™ì ìœ¼ë¡œ í• ë‹¹í•´ì•¼í•  ê²½ìš° mallocí•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤. malloc() í•¨ìˆ˜ëŠ” ì¸ìˆ˜ë¡œ í• ë‹¹ë°›ê³ ì í•˜ëŠ” ë©”ëª¨ë¦¬ì˜ í¬ê¸°ë¥¼ ë°”ì´íŠ¸ ë‹¨ìœ„ë¡œ ì „ë‹¬ ë°›ëŠ”ë‹¤.  
ì´ í•¨ìˆ˜ëŠ” ì „ë‹¬ë°›ì€ ë©”ëª¨ë¦¬ í¬ê¸°ì— ë§ê³ , ì•„ì§ í• ë‹¹ë˜ì§€ ì•Šì€ ì ë‹¹í•œ ë¸”ë¡ì„ ì°¾ì•„ ì²«ë²ˆì¬ ë°”ì´íŠ¸ë¥¼ ê°€ë¦¬í‚¤ëŠ” ì£¼ì†Œê°’ì„ ë°˜í™˜í•œë‹¤.  
ë‹¤ë¥¸ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ì™€ ë‹¬ë¦¬ Cì–¸ì–´ëŠ” ë™ì ìœ¼ë¡œ sizeë¥¼ ê²°ì •í•´ì•¼ í•  ë•ŒëŠ” malloc í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ì•¼ë§Œ êµ¬í˜„ì´ ê°€ëŠ¥í•˜ë‹¤.  
malloc í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•œ ë’¤ free()ë¥¼ ì‚¬ìš©í•´ì„œ ê¼­ ë©”ëª¨ë¦¬ë¥¼ í•´ì œì‹œì¼œì¤˜ì•¼í•œë‹¤.  
free() í•¨ìˆ˜ëŠ” í™ ì˜ì—­ì— í• ë‹¹ë°›ì€ ë©”ëª¨ë¦¬ ê³µê°„ì„ ë‹¤ì‹œ ìš´ì˜ì²´ì œë¡œ ë°˜í™˜í•´ì£¼ëŠ” í•¨ìˆ˜ì´ë‹¤.


- JVM  
  ![https://velog.velcdn.com/images%2Fshin_stealer%2Fpost%2F8e500340-258e-4150-85c0-455921663229%2Fimage.png](https://velog.velcdn.com/images%2Fshin_stealer%2Fpost%2F8e500340-258e-4150-85c0-455921663229%2Fimage.png)

  - Source Code (.java) íŒŒì¼ì„ Java Compilerë¥¼ í†µí•´ì„œ Byte Code(.Class)íŒŒì¼ë¡œ ë³€í™˜í•œë‹¤. (ì»´í“¨í„°ê°€ ì´í•´í•  ìˆ˜ ìˆëŠ” ì½”ë“œë¡œ ë³€í™˜)
  - Byte Codeë¡œ ë³€í™˜ëœ íŒŒì¼ì„ JVMì˜ Class Loader ë¡œ ë³´ë‚¸ë‹¤.
  - Class LoaderëŠ” ë§ ê·¸ëŒ€ë¡œ Class íŒŒì¼ì„ ë¶ˆëŸ¬ì™€ì„œ ë©”ëª¨ë¦¬ì— ì €ì¥í•˜ëŠ” ì—­í• ì„ í•œë‹¤.
  - Execution Engine ì€ Class Loaderì— ì €ì¥ëœ Byte Codeë¥¼ ëª…ë ¹ì–´ ë‹¨ìœ„ë¡œ ë¶„ë¥˜í•˜ì—¬ í•˜ë‚˜ì”© ì‹¤í–‰í•˜ê²Œ í•˜ëŠ” ì—”ì§„ì´ë‹¤.
  - Garbage Collector ëŠ” ì‚¬ìš©í•˜ì§€ ì•Šê±°ë‚˜ í•„ìš”ì—†ëŠ” ê°ì²´ë“¤ì„ ë©”ëª¨ë¦¬ì—ì„œ ì†Œë©¸ì‹œí‚¤ëŠ” ì—­í• ì„ í•œë‹¤.
  - Runtime Data Area (Memory Area) ëŠ” JVMì´ í”„ë¡œê·¸ë¨ì„ ìˆ˜í–‰í•˜ê¸°ìœ„í•´ ìš´ì˜ì²´ì œë¡œë¶€í„° í• ë‹¹ë°›ì€ ë©”ëª¨ë¦¬ ê³µê°„ì´ë‹¤.

  ![https://velog.velcdn.com/images%2Fshin_stealer%2Fpost%2F024b42b8-85fa-4393-9668-6ef15227a0d0%2Fimage.png](https://velog.velcdn.com/images%2Fshin_stealer%2Fpost%2F024b42b8-85fa-4393-9668-6ef15227a0d0%2Fimage.png)


  1) Method Area
  - JVMì´ ì‹¤í–‰ë˜ë©´ì„œ ìƒê¸°ëŠ” ê³µê°„ì´ë‹¤.
  - Class ì •ë³´, ì „ì—­ë³€ìˆ˜ ì •ë³´, Static ë³€ìˆ˜ ì •ë³´ê°€ ì €ì¥ë˜ëŠ” ê³µê°„ì´ë‹¤.
  - Runtime Constant Pool ì—ëŠ” ë§ ê·¸ëŒ€ë¡œ 'ìƒìˆ˜' ì •ë³´ê°€ ì €ì¥ë˜ëŠ” ê³µê°„ì´ë‹¤.
  - ëª¨ë“  ìŠ¤ë ˆë“œì—ì„œ ì •ë³´ê°€ ê³µìœ ëœë‹¤.  
  
  2) Heap
  - new ì—°ì‚°ìë¡œ ìƒì„±ëœ ê°ì²´, Arrayì™€ ê°™ì€ ë™ì ìœ¼ë¡œ ìƒì„±ëœ ë°ì´í„°ê°€ ì €ì¥ë˜ëŠ” ê³µê°„
  - Heapì— ì €ì¥ëœ ë°ì´í„°ëŠ” Garbage Collector ê°€ ì²˜ë¦¬í•˜ì§€ ì•ŠëŠ”í•œ ì†Œë©¸ë˜ì§€ ì•ŠëŠ”ë‹¤.
  - Reference Type ì˜ ë°ì´í„°ê°€ ì €ì¥ë˜ëŠ” ê³µê°„
  - ëª¨ë“  ìŠ¤ë ˆë“œì—ì„œ ì •ë³´ê°€ ê³µìœ ëœë‹¤.

  3) Stack
  - ì§€ì—­ë³€ìˆ˜, ë©”ì†Œë“œì˜ ë§¤ê°œë³€ìˆ˜ì™€ ê°™ì´ ì ì‹œ ì‚¬ìš©ë˜ê³  í•„ìš”ê°€ ì—†ì–´ì§€ëŠ” ë°ì´í„°ê°€ ì €ì¥ë˜ëŠ” ê³µê°„
  - Last In First Out, ë‚˜ì¤‘ì— ë“¤ì–´ì˜¨ ë°ì´í„°ê°€ ë¨¼ì € ë‚˜ê°„ë‹¤
  - ë§Œì•½, ì§€ì—­ë³€ìˆ˜ ì´ì§€ë§Œ Reference Typeì¼ ê²½ìš°ì—ëŠ” Heap ì— ì €ì¥ëœ ë°ì´í„°ì˜ ì£¼ì†Œê°’ì„ Stack ì— ì €ì¥í•´ì„œ ì‚¬ìš©í•˜ê²Œ ëœë‹¤.
  - ìŠ¤ë ˆë“œë§ˆë‹¤ í•˜ë‚˜ì”© ì¡´ì¬í•œë‹¤.

  4) PC Register
  - ìŠ¤ë ˆë“œê°€ ìƒì„±ë˜ë©´ì„œ ìƒê¸°ëŠ” ê³µê°„
  - ìŠ¤ë ˆë“œê°€ ì–´ëŠ ëª…ë ¹ì–´ë¥¼ ì²˜ë¦¬í•˜ê³  ìˆëŠ”ì§€ ê·¸ ì£¼ì†Œë¥¼ ë“±ë¡í•œë‹¤.
  - JVMì´ ì‹¤í–‰í•˜ê³  ìˆëŠ” í˜„ì¬ ìœ„ì¹˜ë¥¼ ì €ì¥í•˜ëŠ” ì—­í• 
  
  5) Native Method Stack

  - Java ê°€ ì•„ë‹Œ ë‹¤ë¥¸ ì–¸ì–´ (C, C++) ë¡œ êµ¬ì„±ëœ ë©”ì†Œë“œë¥¼ ì‹¤í–‰ì´ í•„ìš”í•  ë•Œ ì‚¬ìš©ë˜ëŠ” ê³µê°„  
[ğŸš€ Visualizing memory management in JVM(Java, Kotlin, Scala, Groovy, Clojure)](https://dev.to/deepu105/visualizing-memory-management-in-jvm-java-kotlin-scala-groovy-clojure-19le)

---
  
### ğŸ“– í•™ìŠµëª©í‘œ

- í”„ë¡œì„¸ìŠ¤ ë©”ëª¨ë¦¬ ê´€ë¦¬ ëª¨ë¸
- í”„ë¡œì„¸ìŠ¤ ë©”ëª¨ë¦¬ êµ¬ì¡°
- í”„ë¡œì„¸ìŠ¤ ë™ì‘ ë°©ì‹
- ìŠ¤íƒStack ì˜ì—­, í™Heap ì˜ì—­, í…ìŠ¤íŠ¸Text ì˜ì—­, ê¸€ë¡œë²Œë³€ìˆ˜GVAR ì˜ì—­ì˜ ì—­í• ê³¼ ë™ì‘ ë°©ì‹

í˜„ëŒ€ ìš´ì˜ì²´ì œë“¤ì€ í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹¤í–‰í•  ë•Œë§ˆë‹¤ ë©”ëª¨ë¦¬ ëª¨ë¸ì„ ìƒì„±í•´ì„œ ê´€ë¦¬í•œë‹¤.  
ë©”ëª¨ë¦¬ ê´€ë¦¬ ëª¨ë¸ì— ëŒ€í•œ ì§€ì‹ì„ í•™ìŠµí•˜ê³  ë™ì‘ë°©ì‹ì„ ì´í•´í•˜ë©´ ëª¨ë“  í”„ë¡œê·¸ë˜ë° ì–¸ì–´ ë™ì‘ê³¼ ì²˜ë¦¬ íë¦„ì„ ì´í•´í•˜ëŠ”ë° ë„ì›€ì´ ëœë‹¤

---

## í”„ë¡œì„¸ìŠ¤ ë©”ëª¨ë¦¬ êµ¬ì¡°

í”„ë¡œì„¸ìŠ¤ë€ ì–´ë–¤ í”„ë¡œê·¸ë¨ì´ ì‹¤í–‰ë˜ê¸° ìœ„í•´ ë©”ëª¨ë¦¬ì— ì˜¬ë¼ê°„ ìƒíƒœì´ë‹¤. ê° í”„ë¡œì„¸ìŠ¤ëŠ” ë…ìì ì¸ ì£¼ì†Œ ê³µê°„ì„ ê°€ì§€ê³  ìˆë‹¤.
ë¬¼ë¦¬ì ì¸ ë©”ëª¨ë¦¬ê°€ ì•„ë‹ˆë¼ ìš´ì˜ì²´ì œê°€ ê°€ìƒ ë©”ëª¨ë¦¬ ìˆ˜ì¤€ì—ì„œ í”„ë¡œì„¸ìŠ¤ë³„ë¡œ ë©”ëª¨ë¦¬ ê´€ë¦¬í•˜ëŠ” ë°©ì‹. ìš´ì˜ì²´ì œê°€ í”„ë¡œì„¸ìŠ¤ë¥¼ ìƒì„±í•  ë•Œë§ˆë‹¤ ê´€ë¦¬í•˜ëŠ” ë©”ëª¨ë¦¬ êµ¬ì¡°ëŠ” ì—­í• ë³„ë¡œ ì„¹ì…˜ì´ ë‚˜ëˆ ì§„ë‹¤

![https://lucas-image.codesquad.kr/16403278811501%2AfwkyPI8Gmzd0Q_XAGM5_eA.png](https://lucas-image.codesquad.kr/16403278811501%2AfwkyPI8Gmzd0Q_XAGM5_eA.png)

1. TEXT ì„¹ì…˜
- í”„ë¡œê·¸ë¨ì— ìˆëŠ” í•¨ìˆ˜ ì½”ë“œ, ì œì–´ë¬¸, ìƒìˆ˜ ë“±ì„ í¬í•¨í•œë‹¤
- ì¼ë°˜ì ìœ¼ë¡œ í•œë²ˆ ë¡œë”©í•˜ë©´ ë°”ë€Œì§€ ì•ŠëŠ”ë‹¤.
  - JVMì—ì„œëŠ” TEXT ì˜ì—­ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.
  - nodeë‚˜ ë¸Œë¼ìš°ì €ì—ì„œëŠ” TEXT ì˜ì—­ ëŒ€ì‹  ì½”ë“œ ì˜ì—­ì´ ë³„ë„ë¡œ ì¡´ì¬í•œë‹¤
2. GVAR/BSS ì„¹ì…˜
- ë²”ìœ„(scope)ê°€ ì •í•´ì§€ì§€ ì•Šì€ ì „ì—­(Global ë˜ëŠ” Static) ë³€ìˆ˜ë¥¼ í¬í•¨
- GVARëŠ” ì´ˆê¸°ê°’ì´ 0ì´ ì•„ë‹Œ íŠ¹ì •í•œ ê°’ì„ ì§€ì •í•œ ê²½ìš° ì‚¬ìš©
3. HEAP ì„¹ì…˜
- ë™ì ìœ¼ë¡œ í• ë‹¹ë˜ëŠ” ë©”ëª¨ë¦¬ ê³µê°„ìœ¼ë¡œ Cì—ì„  malloc(), Javaì—ì„  new ëª…ë ¹ìœ¼ë¡œ í• ë‹¹
- í™ ì˜ì—­ì— í• ë‹¹í•œ ë©”ëª¨ë¦¬ ê³µê°„ì— ëŒ€í•œ ì£¼ì†Œë¥¼ ìŠ¤íƒì— ìˆëŠ” í¬ì¸í„° ë³€ìˆ˜ë¡œ ì°¸ì¡°í•˜ëŠ” ê²½ìš°ê°€ ë§ìŒ
4. STACK ì„¹ì…˜
- í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ë•Œë§ˆë‹¤ ì§€ì—­ ë³€ìˆ˜, ë§¤ê°œë³€ìˆ˜ì™€ ë¦¬í„´ê°’ ë“±ì´ ìŒ“ì¸ë‹¤.

![https://lucas-image.codesquad.kr/1625800638853Screen%20Shot%202021-07-09%20at%2012.14.55%20PM.png](https://lucas-image.codesquad.kr/1625800638853Screen%20Shot%202021-07-09%20at%2012.14.55%20PM.png)

Code, Data, BSS ì˜ì—­ì€ ì»´íŒŒì¼ ì‹œ í¬ê¸°ê°€ ê²°ì •ë˜ê³ , Heap, Stack ì˜ì—­ì€ ëŸ°íƒ€ì„ì‹œ í¬ê¸°ê°€ ê²°ì •ëœë‹¤.
Stackì˜ ì§€ì—­ë³€ìˆ˜ëŠ” ì‚¬ìš©í•˜ê³  ì†Œë©¸í•˜ë¯€ë¡œ ë°ì´í„° ìš©ëŸ‰ì´ ë¶ˆí™•ì‹¤í•˜ë‹¤. 
ê·¸ë ‡ê¸° ë•Œë¬¸ì— ë°‘ì—ì„œ ë¶€í„° ì²´ì›Œì˜¬ë¦¬ê³  Heapì€ ìœ„ì—ì„œë¶€í„° ì±„ì›Œë‚˜ê°„ë‹¤. 
ì´ë ‡ê²Œ ì„œë¡œ ì£¼ì†Œê°’ì„ ì±„ì›Œë‚˜ê°€ë‹¤ê°€ Heapì—ì„œ Stackë°©í–¥ìœ¼ë¡œ ì˜ì—­ì„ ì¹¨ë²”í•˜ëŠ” ê²½ìš° HEAP overflowë¼ê³  í•˜ë©° ë°˜ëŒ€ë¡œ Stackì—ì„œ Heap ë°©í–¥ìœ¼ë¡œ ì˜ì—­ì„ ì¹¨ë²”í•œë‹¤ë©´ STACK overflowë¼ê³  í•œë‹¤. 
(í™ ì˜¤ë²„í”Œë¡œìš°ëŠ” ê±°ì˜ ì¼ì–´ë‚˜ì§€ ì•ŠëŠ”ë‹¤)

### ìë°”/ì½”í‹€ë¦° JVMì—ì„œ í™ êµ¬ì¡°

JVMì˜ ê°ì²´ ê°’ë“¤ì€ Heapì— ìƒì„±ë˜ê³  ê°ì²´ë¡œ ì ‘ê·¼ ê°€ëŠ¥í•œ êµ¬ì¡°ì´ë©°, ì¼ë¶€ ì›ì‹œ íƒ€ì„ primitive typeë“¤ì€ Stackì— ìƒì„±ë˜ê¸°ë„ í•œë‹¤

![https://lucas-image.codesquad.kr/1670392838100JVM%20Heap.png](https://lucas-image.codesquad.kr/1670392838100JVM%20Heap.png)

---
ìœ„ì˜ ë‚´ìš©ì„ ì¢€ ë” ìì„¸í•˜ê²Œ ë‹¤ë£¨ìë©´,

### í”„ë¡œì„¸ìŠ¤ì˜ ì£¼ì†Œ ê³µê°„

![https://velog.velcdn.com/images%2Fseyoung755%2Fpost%2F0fa7ccca-2546-43af-811d-76c6b1047554%2F%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202022-01-20%20%EC%98%A4%EC%A0%84%2010.00.58.png](https://velog.velcdn.com/images%2Fseyoung755%2Fpost%2F0fa7ccca-2546-43af-811d-76c6b1047554%2F%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202022-01-20%20%EC%98%A4%EC%A0%84%2010.00.58.png)

### Code ì˜ì—­

ì½”ë“œ ì˜ì—­ì€ ì½”ë“œ ìì²´ë¥¼ êµ¬ì„±í•˜ëŠ” ë©”ëª¨ë¦¬ ì˜ì—­ìœ¼ë¡œ Hex íŒŒì¼ì´ë‚˜ Bin íŒŒì¼ ë©”ëª¨ë¦¬ì´ë‹¤.  ì‹¤ì œ ì†ŒìŠ¤ ì½”ë“œë¥¼ CPUê°€ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” í˜•íƒœì˜ ê¸°ê³„ì–´ í˜•íƒœë¡œ ë³€í™˜í•˜ì—¬ ì €ì¥í•˜ëŠ” ê³µê°„. ì´ ì˜ì—­ì€ ì»´íŒŒì¼ ì‹œì— ê²°ì •ë˜ê³  ìˆ˜ì •í•  ìˆ˜ ì—†ë„ë¡ Read-Onlyì˜ í˜•íƒœë¥¼ ë¤ë‹¤. ì‹¤ì œ CPUëŠ” í”„ë¡œê·¸ë¨ ì¹´ìš´í„°ê°€ ê°€ë¦¬í‚¤ëŠ” ì½”ë“œ ì˜ì—­ì˜ ì£¼ì†Œë¥¼ ì°¾ì•„ê°€ì„œ ëª…ë ¹ì„ ìˆ˜í–‰í•œë‹¤.

- ì‹œìŠ¤í…œ ì½œì´ë‚˜ ì¸í„°ëŸ½íŠ¸ ì²˜ë¦¬ ë£¨í‹´ ì½”ë“œ

> ì¸í„°ëŸ½íŠ¸ : í”„ë¡œê·¸ë¨ ì‹¤í–‰ ì¤‘ ì˜ˆê¸°ì¹˜ ì•Šì€ ìƒí™©ì´ë‚˜ í•„ìš”ì— ì˜í•´ ì‹¤í–‰ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ë¥¼ ì¤‘ë‹¨í•˜ê³  OSì—ê²Œ CPU ì œì–´ê¶Œì„ ë„˜ê²¨ ì²˜ë¦¬í•´ì•¼ í•˜ëŠ” ì‘ì—…ë“¤

> ì‹œìŠ¤í…œ ì½œ : ì¼ë°˜ í”„ë¡œì„¸ìŠ¤ê°€ OSì˜ ë„ì›€ì´ í•„ìš”í•œ íŠ¹ê¶Œ ëª…ë ¹(ex. I/O ìš”ì²­)ì„ ìš”ì²­í•  ë•Œ ì¼ìœ¼í‚¤ëŠ” ì¸í„°ëŸ½íŠ¸

- CPU, ë©”ëª¨ë¦¬ ë“±ì˜ ìì› ê´€ë¦¬ë¥¼ ìœ„í•œ ì½”ë“œ
- í¸ë¦¬í•œ ì¸í„°í˜ì´ìŠ¤ ì œê³µì„ ìœ„í•œ ì½”ë“œ

### Data ì˜ì—­

ì „ì—­ ë³€ìˆ˜ë‚˜ Static ë³€ìˆ˜, ë°°ì—´, êµ¬ì¡°ì²´ ë“± í”„ë¡œê·¸ë¨ì´ ì‚¬ìš©ë˜ëŠ” ë°ì´í„°ê°€ ì €ì¥ë˜ëŠ” ê³µê°„. ì½”ë“œì— ì „ì—­ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë©´, ì»´íŒŒì¼ ì‹œ ì´ ë°ì´í„° ì˜ì—­ì— ìˆëŠ” ì£¼ì†Œë¥¼ ê°€ë¦¬í‚¤ë„ë¡ ì„¤ì •ëœë‹¤. ì „ì—­ ë³€ìˆ˜ ê°’ì€ ë³€ê²½ë˜ëŠ” ê²½ìš°ê°€ ìˆê¸° ë•Œë¬¸ì— Read-Writeì˜ í˜•íƒœë¡œ ì‘ì„±ëœë‹¤. ì´ ë•Œ ì´ˆê¸°í™” ëœ ë°ì´í„°ëŠ” Data ì˜ì—­ì— ì €ì¥ë˜ê³  ì´ˆê¸°í™”ë˜ì§€ ì•Šì€ ë°ì´í„°ëŠ” BSS(Block Stated Symbol) ì˜ì—­ì— ì €ì¥ëœë‹¤. í•¨ìˆ˜ ë‚´ë¶€ì— ì„ ì–¸ëœ Static ë³€ìˆ˜ëŠ” í”„ë¡œê·¸ë¨ì´ ì‹¤í–‰ë  ë•Œ ê³µê°„ë§Œ í• ë‹¹ë˜ê³  ê·¸ í•¨ìˆ˜ê°€ ì‹¤í–‰ë  ë•Œ ì´ˆê¸°í™”ëœë‹¤.

> **: Data ì˜ì—­ê³¼ BSS ì˜ì—­ì„ êµ¬ë¶„í•˜ëŠ” ì´ìœ ? ğŸ¤”**
>
> í”„ë¡œê·¸ë¨ì„ ì§  ë’¤ ì»´íŒŒì¼í•˜ê³  ë§í¬í•˜ê³  ì´ë¯¸ì§€ë¡œ ë§Œë“¤ì–´ ì‹œìŠ¤í…œì˜ ROMì— ì €ì¥í–ˆë‹¤ê³  ê°€ì •í–ˆì„ë•Œ ì´ˆê¸°í™”ëœ ë°ì´í„°ëŠ” ì´ˆê¸°ê°’ì„ ì €ì¥í•´ì•¼ í•˜ë‹ˆ Data ì˜ì—­ì— ì €ì¥ë˜ì–´ ROMì— ì €ì¥ëœë‹¤. í•˜ì§€ë§Œ ì´ˆê¸°í™”í•˜ì§€ ì•Šì€ ë°ì´í„°ê¹Œì§€ ROMì— ì €ì¥í•œë‹¤ë©´ í° ì‚¬ì´ì¦ˆì˜ ROMì´ í•„ìš”í•œë° ë¹„ìš©ì´ ë§ì´ ë“¤ì–´ RAMì— ì €ì¥í•˜ê¸° ìœ„í•´ Data ì˜ì—­ê³¼ BSS ì˜ì—­ìœ¼ë¡œ ë‚˜ëˆˆ ê²ƒì´ë‹¤.

![https://velog.velcdn.com/images%2Fseyoung755%2Fpost%2F094a8a5e-586f-4cdb-90c5-7bb1f9800606%2Fimage.png](https://velog.velcdn.com/images%2Fseyoung755%2Fpost%2F094a8a5e-586f-4cdb-90c5-7bb1f9800606%2Fimage.png)

- PCB(Process Control Block) : í”„ë¡œì„¸ìŠ¤ì˜ ê´€ë¦¬ë¥¼ ìœ„í•œ íŠ¹ë³„í•œ ìë£Œêµ¬ì¡°ë¡œ, í˜„ì¬ í”„ë¡œì„¸ìŠ¤ì˜ ë™ì‘ ìƒíƒœ/ ì–´ë””ë¥¼ ì‹¤í–‰ì¤‘ì¸ì§€ ì•Œ ìˆ˜ ìˆëŠ” Program counter ë“±ì´ í¬í•¨ë˜ì–´ ìˆë‹¤. ê° í”„ë¡œì„¸ìŠ¤ë§ˆë‹¤ ìš´ì˜ì²´ì œê°€ ë…ìì ì¸ PCBë¥¼ ê´€ë¦¬í•œë‹¤.
- CPU, ë©”ëª¨ë¦¬ ë“± í•˜ë“œì›¨ì–´ ìì›ì˜ ê´€ë¦¬ë¥¼ ìœ„í•œ ìë£Œêµ¬ì¡°

### Heap ì˜ì—­

ì‚¬ìš©ìê°€ ìƒì„±í•œ ê°ì²´ë“¤ì´ ì €ì¥ë˜ëŠ” ê³µê°„. í”„ë¡œê·¸ë˜ë¨¸ê°€ í•„ìš”í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ê³µê°„ìœ¼ë¡œì¨, ëŸ°íƒ€ì„ì— ê²°ì •ë˜ëŠ” ì˜ì—­ì´ë‹¤. ë©”ëª¨ë¦¬ ì£¼ì†Œ ê°’ì— ì˜í•´ì„œë§Œ ì°¸ì¡°ë˜ê³  ì‚¬ìš©í•˜ëŠ” ì˜ì—­ì´ë‹¤. ìë°”ì—ì„œëŠ” ê°ì²´ê°€ ì´ Heapì— ìƒì„±ì´ ë˜ë©´ ê°€ë¹„ì§€ ì»¬ë ‰í„°ê°€ í™ ì˜ì—­ì—ì„œ ì“¸ëª¨ì—†ëŠ” ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.

### Stack ì˜ì—­

ì‚¬ìš©ìê°€ ì‘ì„±í•œ ì½”ë“œ ì¤‘ í•¨ìˆ˜ í˜¸ì¶œì´ ì¼ì–´ë‚  ë•Œ ì‚¬ìš©ë˜ëŠ” ë¦¬í„´ ì£¼ì†Œ, ë‹¤ìŒ ëª…ë ¹ì–´ì˜ ì½”ë“œ ì˜ì—­ ì£¼ì†Œ, ë§¤ê°œ ë³€ìˆ˜, ì§€ì—­ ë³€ìˆ˜ ë“±ì´ ì €ì¥ë˜ëŠ” ê³µê°„ì´ë‹¤. í•¨ìˆ˜ê°€ í˜¸ì¶œë¨ì— ë”°ë¼ call stackì´ ìŒ“ì—¬ ë‚˜ê°€ê³ , return ë¨ì— ë”°ë¼ ì •ë¦¬ëœë‹¤. ìŠ¤íƒ ì˜ì—­ì€ ì»´íŒŒì¼ ì‹œ ê³µê°„ì´ í• ë‹¹ë˜ê¸° ë•Œë¬¸ì— ë¬´í•œì ìœ¼ë¡œ ì½œ ìŠ¤íƒì„ ìŒ“ì„ ìˆ˜ ì—†ê³ , ì¬ê·€ í•¨ìˆ˜ë¥¼ ë¬´í•œíˆ í˜¸ì¶œí•˜ê±°ë‚˜ í•˜ë©´ ìŠ¤íƒì˜¤ë²„í”Œë¡œìš°ê°€ ë°œìƒí•œë‹¤. Stack ì‚¬ì´ì¦ˆëŠ” ê° í”„ë¡œì„¸ìŠ¤ë§ˆë‹¤ í• ë‹¹ë˜ì§€ë§Œ í”„ë¡œì„¸ìŠ¤ê°€ ë©”ëª¨ë¦¬ì— ë¡œë“œë  ë•Œ Stack ì‚¬ì´ì¦ˆê°€ ê³ ì •ë˜ì–´ ìˆì–´ ëŸ°íƒ€ì„ ì‹œ Stack ì‚¬ì´ì¦ˆë¥¼ ë°”ê¿€ ìˆ˜ ì—†ë‹¤. ëª…ë ¹ ì‹¤í–‰ ì‹œ ìë™ìœ¼ë¡œ ì¦ê°€/ê°ì†Œ í•˜ê¸° ë•Œë¬¸ì— ë³´í†µ ë©”ëª¨ë¦¬ì˜ ë§ˆì§€ë§‰ ë²ˆì§€ë¥¼ ì €ì¥í•œë‹¤

- ê° í”„ë¡œì„¸ìŠ¤ì˜ ì»¤ë„ ìŠ¤íƒì„ ì €ì¥
  - ì»¤ë„ ëª¨ë“œê°€ ëë‚˜ê³  ì›ë˜ í”„ë¡œì„¸ìŠ¤ë¡œ ëŒì•„ê°€ê¸° ìœ„í•œ ì •ë³´ì˜ ì¼ë¶€ë¥¼ ì €ì¥í•œë‹¤.
  - ê° í”„ë¡œì„¸ìŠ¤ê°€ ì»¤ë„ ëª¨ë“œì— ì§„ì…í•˜ì—¬ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ ì»¤ë„ ì˜ì—­ì˜ ìŠ¤íƒì—ì„œ ì‘ì—…ì„ ìˆ˜í–‰í•œë‹¤

---

### ê¸°ëŠ¥ìš”êµ¬ì‚¬í•­

- í”„ë¡œì„¸ìŠ¤ ë©”ëª¨ë¦¬ êµ¬ì¡°ë¥¼ ì‹œë®¬ë ˆì´ì…˜í•˜ëŠ” í”„ë¡œê·¸ë¨ ì‘ì„±
    - í”„ë¡œì„¸ìŠ¤ ë©”ëª¨ë¦¬ êµ¬ì¡°ë¥¼ ë‹¤ë£¨ëŠ” í”„ë¡œê·¸ë¨ì´ë¼ ë©”ëª¨ë¦¬ ì£¼ì†Œë¥¼ ê°’ìœ¼ë¡œ ë‹¤ë£¨ëŠ” **í¬ì¸í„°** ë³€ìˆ˜ë¥¼ ì§ì ‘ êµ¬í˜„
    - ì²˜ë¦¬í•˜ëŠ” ëª¨ë“  í¬ì¸í„° ë©”ëª¨ë¦¬ ì‚¬ì´ì¦ˆëŠ” 4ë°”ì´íŠ¸ ê¸°ì¤€ - ì–¸ì–´ì—ì„œ 4ë°”ì´íŠ¸ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë™ì‘í•˜ëŠ” íƒ€ì… í™œìš©(ë¬´ì—‡ì¸ì§€ ìƒê°í•˜ê³  ì¶”ê°€ë¡œ ì •ë¦¬í•  ê²ƒ)
- í”„ë¡œê·¸ë˜ë° ìš”êµ¬ì‚¬í•­ì— ìˆëŠ” í•¨ìˆ˜ë“¤ êµ¬í˜„
- ê° í•¨ìˆ˜ ë™ì‘ì„ í™•ì¸í•˜ê¸° ìœ„í•´ íŠ¹ì •í•œ ì‹œë‚˜ë¦¬ì˜¤ ëŒ€ë¡œ ë™ì‘í•˜ëŠ” í”„ë¡œê·¸ë¨ì„ ë³„ë„ íŒŒì¼ë¡œ ì‘ì„± (í…ŒìŠ¤íŠ¸ ì½”ë“œ??)
    - ì‹œë‚˜ë¦¬ì˜¤ íë¦„ì€ ìŠ¤ìŠ¤ë¡œ ê²°ì •
    - í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ì¶œë ¥í•˜ì§€ ë§ê³ , í•¨ìˆ˜ì—ì„œ return í•œ ê°’ì„ í˜¸ì¶œí•˜ëŠ” í”„ë¡œê·¸ë¨ì—ì„œ ì¶œë ¥

### í”„ë¡œê·¸ë˜ë° ìš”êµ¬ì‚¬í•­

Memory ê°ì²´ë¥¼ êµ¬í˜„í•œë‹¤

- ë§¤ê°œë³€ìˆ˜, ë¦¬í„´ì— í•„ìš”í•œ íƒ€ì… ìŠ¤ìŠ¤ë¡œ íŒë‹¨í•´ì„œ ì„ ì–¸
- ë¦¬í„´ ëª…ì„¸ê°€ ìˆëŠ” ê²½ìš° ë°˜ë“œì‹œ ë¦¬í„´
- ìŠ¤íƒ ë™ì‘ì„ ë‹´ë‹¹í•˜ëŠ” Stack íƒ€ì…ë„ ë³„ë„ë¡œ ì„ ì–¸, ë‚´ë¶€ì—ëŠ” ìŠ¤íƒí¬ì¸í„° ë³€ìˆ˜ë¥¼ ë‘ê³  ëª‡ ë²ˆì§¸ê¹Œì§€ ìŒ“ì˜€ëŠ”ì§€ í™•ì¸

#### **1.Â `init(stackSize, heapSize)`**

- ìŠ¤íƒì˜ì—­ í¬ê¸°ì™€ í™ì˜ì—­ í¬ê¸°ë¥¼ ì§€ì •í•˜ë©´ í”„ë¡œì„¸ìŠ¤ ê³µê°„ì„ ìœ„í•œ ê¸°ë³¸ ì£¼ì†Œ(base address)ë¥¼ ë¦¬í„´í•œë‹¤.
    - ì´ë²ˆ ë¯¸ì…˜ì—ì„œëŠ” ì¼ë°˜ì ì¸ í”„ë¡œì„¸ìŠ¤ ë©”ëª¨ë¦¬ ëª¨ë¸(ë°°ê²½ ì§€ì‹ ì°¸ì¡°)ì¤‘ì—ì„œ ìŠ¤íƒê³¼ í™ ì˜ì—­ì„ ìœ„ì£¼ë¡œ êµ¬í˜„í•œë‹¤. ë‹¤ë¥¸ ì˜ì—­ì€ ë¬´ì‹œí•œë‹¤.
    - ì•„ë˜ í•¨ìˆ˜ë“¤ì—ì„œ ì‚¬ìš©í•˜ëŠ” í¬ì¸í„° ì£¼ì†Œë“¤ì€ ì´ í•¨ìˆ˜ì—ì„œ ë¦¬í„´í•˜ëŠ” ê¸°ë³¸ ì£¼ì†Œì—ì„œ ì–¼ë§ˆë‚˜ ë–¨ì–´ì§„ì§€ ìƒëŒ€ ì£¼ì†Œë¡œ í‘œí˜„í•œë‹¤.

#### **2.Â `setSize(type, length)`**

- type ë³„ë¡œ ê³ ìœ í•œ ì‚¬ì´ì¦ˆë¥¼ ê°€ì§€ë„ë¡ ë“±ë¡í•œë‹¤.
    - ì˜ˆì‹œ :Â **`setSize("int", 8)`**Â //int íƒ€ì…ì„ 8ë°”ì´íŠ¸ ê¸¸ì´ë¡œ ì§€ì •í•œë‹¤.
    - ë©”ëª¨ë¦¬ ì‹œë®¬ë ˆì´ì…˜ì„ ìœ„í•´ ìŠ¤ìŠ¤ë¡œ í•„ìš”í•œ íƒ€ì…ì„ ì§€ì •í•´ì•¼ í•œë‹¤.
    - ì´ë¯¸ ë“±ë¡í•œ íƒ€ì…ì€ ë‹¤ì‹œ ì‚¬ì´ì¦ˆë¥¼ ë°”ê¿€ ìˆ˜ ì—†ë‹¤.
    - ì‚¬ì´ì¦ˆëŠ” 1,2,4,8,16,32 ì¤‘ì— í•˜ë‚˜ë§Œ ê°€ëŠ¥í•˜ë‹¤.

#### **3.Â `malloc(type, count)`**

- ì´ë¯¸ ë“±ë¡ëœ typeì— ëŒ€í•´ countë§Œí¼ ë°˜ë³µí•´ì„œ ë©”ëª¨ë¦¬ë¥¼ í• ë‹¹í•˜ê³  ì‹œì‘ ìœ„ì¹˜ ê³ ìœ í•œ ì£¼ì†Œë¥¼ ìŠ¤íƒ ì˜ì—­ì— ì¶”ê°€í•˜ê³ , ìŠ¤íƒ ì£¼ì†Œê°’ì„ ë¦¬í„´í•œë‹¤.
    - ë§Œì•½ í•´ë‹¹ íƒ€ì… í¬ê¸°ê°€ 8ë°”ì´íŠ¸ ë³´ë‹¤ ì‘ì€ ê²½ìš°ëŠ” íŒ¨ë”©ì„ ë¶™ì—¬ì„œ 8ë°”ì´íŠ¸ë¡œ ë§Œë“  í›„, countë§Œí¼ ë°˜ë³µí•œë‹¤.
    - ì˜ˆë¥¼ ë“¤ì–´ boolean íƒ€ì…ì„ 1ë¡œ ë“±ë¡í–ˆê³  malloc("boolean", 4)ë¥¼ í˜¸ì¶œí•œë‹¤ë©´ íŒ¨ë”©ì„ ë¶™ì—¬ì„œ 8ë°”ì´íŠ¸ ë‹¨ìœ„ë¡œ 4ê°œ = ì´ 32ë°”ì´íŠ¸ë¥¼ í• ë‹¹í•œë‹¤.

#### **4.Â `free(pointer)`**

- malloc í•  ë•Œ í• ë‹¹í–ˆë˜ ìŠ¤íƒ ì£¼ì†Œê°’ì„ ì…ë ¥ìœ¼ë¡œ ë°›ëŠ”ë‹¤. ìŠ¤íƒ ì£¼ì†Œê°’ì— ìˆëŠ” í™ì˜ì—­ ê³ ìœ  ì£¼ì†Œë¥¼ ì°¾ì•„ì„œ í•´ì œí•˜ê³  ë°˜í™˜í•œë‹¤.

#### **5.Â `call(name, paramCount)`**

- ë§ˆì§€ë§‰ ìŠ¤íƒ ìœ„ì¹˜ë¥¼ ì•Œë ¤ì£¼ëŠ”Â **`ìŠ¤íƒ í¬ì¸í„°`**ì— í¬ì¸í„° ë³€ìˆ˜ë¥¼ paramCountë§Œí¼ ë°˜ë³µí•´ì„œ ìƒì„±í•˜ê³ Â **`ìŠ¤íƒ í¬ì¸í„°`**ë¥¼ ì¦ê°€ì‹œí‚¨ë‹¤.
    - paramCountëŠ” 0ë¶€í„° 10ì´í•˜ ê°’ì´ë‹¤.
    - nameì€ ìµœëŒ€ 8ìê¹Œì§€ë§Œ ê°€ëŠ¥í•˜ë‹¤.
    - call ì‹¤í–‰í•  ë•Œë§ˆë‹¤ nameê°’ì„ ìŠ¤íƒì— ê¸°ë¡í•˜ê³  ì•„ë˜ callstack()ì—ì„œ í™œìš©í•œë‹¤.

#### **6.Â `returnFrom(name)`**

- ì¦ê°€í–ˆë˜ ìŠ¤íƒ ê³µê°„ì„ ë¹„ìš°ê³  ì´ì „ í˜¸ì¶œ ìœ„ì¹˜ë¡œ ì´ë™í•œë‹¤.
    - ì´ ë•Œ nameê°’ì€ call() í˜¸ì¶œë¡œ ê°€ì¥ ìµœê·¼ì— í˜¸ì¶œí•œ nameê³¼ ë™ì¼í•´ì•¼ í•œë‹¤.
    - ê°€ì¥ ìµœê·¼ë³´ë‹¤ ì´ì „ì— í˜¸ì¶œí•œ nameì´ë©´ ì—ëŸ¬ê°’ì„ throw í•œë‹¤.
    - ë§Œì•½ call() í˜¸ì¶œ ì´í›„ì— malloc()ìœ¼ë¡œ ìƒì„±í•œ stack ì˜ì—­ì— í¬ì¸í„° ê°’ì´ ìˆë‹¤ë©´ ê°™ì´ ë¹„ìš´ë‹¤.
    - ë‹¨, malloc()ìœ¼ë¡œ ìƒì„±ëœ í™ ì˜ì—­ì˜ ë©”ëª¨ë¦¬ëŠ” free()í•  ìˆ˜ ì—†ê³  ìŠ¤íƒì— ìˆë˜ í¬ì¸í„° ë³€ìˆ˜ë§Œ ì‚­ì œí•œë‹¤.
    - call()ì„ í˜¸ì¶œí•œ ê²½ìš°ê°€ ì—†ì„ ê²½ìš° ì•„ë¬´ëŸ° ë™ì‘ì„ í•˜ì§€ ì•ŠëŠ”ë‹¤.

#### **7.Â `usage()`**

- ìŠ¤íƒ ì˜ì—­ ì „ì²´í¬ê¸°, ì‚¬ìš©ì¤‘ì¸ ìš©ëŸ‰, ë‚¨ì€ ìš©ëŸ‰, í™ ì˜ì—­ ì „ì²´í¬ê¸°, ì‚¬ìš©ì¤‘ì¸ ìš©ëŸ‰, ë‚¨ì€ ìš©ëŸ‰ì„ ìˆœì„œëŒ€ë¡œ ë°°ì—´ë¡œ ë¦¬í„´í•œë‹¤.

#### **8.Â `callstack()`**

- í˜„ì¬ ìŠ¤íƒì— ìŒ“ì—¬ìˆëŠ” í˜¸ì¶œ ìŠ¤íƒì„ ë¬¸ìì—´ë¡œ ë¦¬í„´í•œë‹¤.
- ì¶œë ¥í•˜ëŠ” ìŠ¤íƒ í¬ì¸í„°ëŠ”Â **`base address + offset address`**Â í˜•íƒœë¡œ í‘œí˜„í•œë‹¤
    - ì˜ˆë¥¼ ë“¤ì–´ call("foo", 0), call("bar", 1), call("dap", 2) ìˆœì„œë¡œ í˜¸ì¶œí•œ ê²½ìš°ëŠ”Â **`foo() 0xAF00 -> bar() 0xB100 -> dap() 0xBF00`**Â í˜•íƒœë¡œ í•¨ìˆ˜ ì´ë¦„ê³¼ ìŠ¤íƒì˜ ì£¼ì†Œë¥¼ ë¦¬í„´í•œë‹¤.
    - ê·¸ í›„ì— returnFrom("dap") í˜¸ì¶œí•œ ê²½ìš°ëŠ”Â **`foo() 0xAF00 -> bar() 0xB100`**Â í˜•íƒœë¡œ dapì„ ë¦¬í„´í•˜ê³  ë‚¨ì€ í•¨ìˆ˜ ì´ë¦„ê³¼ ìŠ¤íƒì˜ ì£¼ì†Œë¥¼ ë¦¬í„´í•œë‹¤.

#### **9.Â `heapdump()`**

- í™ì˜ì—­ì—ì„œ ì‚¬ìš©ì¤‘ì¸ ìƒíƒœë¥¼ ë¬¸ìì—´ ë°°ì—´ë¡œ í‘œí˜„í•´ì„œ ë¦¬í„´í•œë‹¤.
    - í™ ì˜ì—­ì— ì •ë³´ëŠ” íƒ€ì…ê³¼ í¬ê¸°, í•´ë‹¹ ì£¼ì†Œë¥¼ ì°¸ì¡°í•˜ëŠ” ìŠ¤íƒ í¬ì¸í„° ë³€ìˆ˜ ì •ë³´ë„ í¬í•¨í•œë‹¤.
    - ëª¨ë“  í¬ì¸í„° ì£¼ì†Œê°’ì€Â **`base address + offset address`**Â í˜•íƒœë¡œ í‘œí˜„í•œë‹¤

#### **10.Â `garbageCollect()`**

- í™ì˜ì—­ì— í• ë‹¹ëœ íƒ€ì…ë“¤ ì¤‘ì—ì„œ ìŠ¤íƒì— í¬ì¸í„° ë³€ìˆ˜ê°€ ì—†ëŠ” ê²½ìš°ë¥¼ ì°¾ì•„ì„œ í•´ì œí•˜ëŠ” ë™ì‘ì„ í•œë‹¤.

#### **11.Â `reset()`**

- ëª¨ë“  stackê³¼ heap ê³µê°„ì„ ë¹„ìš°ê³  inití–ˆì„ ë•Œì™€ ë™ì¼í•˜ê²Œ ì´ˆê¸°ìƒíƒœë¡œ ë§Œë“ ë‹¤.

### ì˜ˆìƒê²°ê³¼ ë° ë™ì‘ì˜ˆì‹œ

```
base = memory.init(1024, 1024)
memory.setSize("short", 4)
memory.setSize("int", 8)
memory.setSize("string", 16)
arrayPointer = memory.malloc("int", 4)
shortPointer = memory.malloc("short", 5)
print(heapdump())
call("foo", 2)
string1 = memory.malloc("crong", 1)
print(callstack())
call("bar", 1)
string2 = memory.malloc("jk", 2)
returnFrom("bar")
free(string1)
print(heapdump())
free(string2)
print(callstack())
garbageCollect()
print(heapdump())
reset()
print(heapdump())
```