## CS03


### 학습 목표

- 컴퓨터를 구성하는 3가지 요소 중에서 CPU 부분에 대해 이해하고, 구현하는 것이 목표다.
- CPU 구성 요소에 대해 이해하고, CPU 명령어를 처리하도록 구현한다

- [ ] 컴퓨터 구성 요소 3가지
- [ ] CPU 구성요소
- [ ] CPU 명령어 처리 과정
- [ ] CPU 구현

-----

### 컴퓨터의 구성 요소

1. **중앙처리장치(CPU, Central Processing Unit)**
- 연산 담당
- 메모리에 저장된 명령어를 읽어들여 수행하는 주체
- 명령어 싸이클(Fetch/Excution)을 반복해 프로그램을 실행
  - ALU(Arithmetic and Logic Unit)
    - 데이터 처리
    - 산술/논리 연산을 수행하는 장치
  - 제어장치(CU, Control Unit)
    - 명령어 레지스터에 저장된 명령어를 해석
    - 컴퓨터 구성요소는 제어장치의 관리를 받음
    - 메모리에서 명령을 가져오고, 디코딩해서, 실행할 때까지 각 컨트롤 신호를 만드는 역할(각 컴퓨터 구성요소를 제어할 제어신호를 생성)
  - 레지스터(Register)
    - 명령어를 실행하기 위해 필요한 데이터와 상태, 명령어를 저장
  - 내부 버스(Internal Bus)
    - CPU 내부의 구성요소 간 데이터 전달과 연결을 위한 경로
2. **주기억장치(Main Memory)** : 기억 담당
- 보조 저장장치와 구별되어 비교적 저장 용량이 적지만, 속도가 빨라 실행되는 프로그램이 적재되어 있는 기억장치
- CPU와 온라인으로 연결되어 CPU가 필요 시 마다 데이터를 전달
- CPU는 Store와 Load의 방식으로 기억장치에 액세스
  - 적재(Load)
    - 기억장치에 저장된 데이터를 읽어 CPU의 레지스터로 적재
    - 주소버스를 통해 CPU가 요구하는 데이터의 주소값과 제어 버스를 통해 Read 신호가 전달
  - 저장(Store)
    - CPU의 레지스터에서 기억장치의 특정 주소에 데이터를 저장
    - 주소 버스를 통해 특정 주소와 제어버스를 통해 Write신호가 전달
  - 워드(Word)
    - CPU가 한 번에 접근하는 데이터를 의미
    - CPU가 지원하는 비트 수과 크기가 같음
    - 32bit CPU에서는 32bit, 64bit CPU에서는 64bit
3. **입출력장치(I/O Unit)**
- 사용자 또는 컴퓨터 외부에서 데이터를 입력받고 출력하기 위한 장치
4. **시스템 버스(System bus)**
- 컴퓨터의 각 구성요소 간 데이터, 신호를 전달하기 위한 데이터 전달 경로
- 주소 버스, 데이터 버스, 제어 버스로 구성
  - 주소 버스
    - 기억 장치의 주소 또는 입출력 장치의 포트번호를 지정하고 전달
    - Fetch, Load, Store 명령을 위해서 메모리에 주소를 알려주는 역할
  - 데이터 버스
    - 컴퓨터 구성 요소들 간에 데이터를 전달. 지정된 주소의 값을 레지스터로 가져오는 역할. 레지스터 크기와 같아야 함
  - 제어 신호
    - 각 구성 요소간 제어 신호를 전달

![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FdODtbE%2FbtqFA5PgvPq%2FG1lucknryfv0gsdkxpMSb1%2Fimg.png)

-----

### 요구사항
- 기본 처리 단위 word는 2바이트(16비트) 기준
- 레지스터는 PC, 그 외 일반적으로 사용할 수 있는 7개 R1-R7 레지스터 포함
- ALU는 두 레지스터에 저장된 값 A,B를 계산해서 목적 레지스터에 저장
  - ADD 덧셈, SUB 뺄셈, AND 논리곱, OR 논리합 연산
- 기계어로 된 프로그램이 들어있다고 가정하고 구현
  - 데이터 메모리 범위는 특정한 주소(0x00A2를 포함하는 범위)에 특정한 값 (Map 주소,값 매핑)

### 구현목록
- [ ] reset() 레지스터 값을 모두 지우고, PC값도 0으로 초기화
- [ ] fetch() 현재 PC 값에 해당하는 메모리에서 프로그램 명령어를 가져와서 리턴, PC카운트 1증가
  - fetch에서 리턴한 명령을 execute에 넘긴다
- [ ] execute(Int16 IR) 전달한 명령어를 어떤 명령인지 분석, 계산, 처리
- [ ] dump() 레지스터들 값을 배열에 넣어서 리턴

### 출력형식
```
0x0000b MOV R4, 0x00A0
0x0010b MOV R5, 0x0002
0x0020b LOAD R1, R4, R5
0x0030b ADD R2, R1, #4
0x0040b SUB R3, R1, R2
0x0050b STORE R3, R4, #4
```
- 이 프로그램을 기계어(비트코드)로 바꿔서 CPU에 전달
  - 기계어로 바꾸는 프로그램 작성 안해도 됨
  - 직접 비트코드 넘기기

### 추가 요구 사항
- 1부터 5까지 더하는 기계어 프로그램 차례대로 실행 -> dump하기 